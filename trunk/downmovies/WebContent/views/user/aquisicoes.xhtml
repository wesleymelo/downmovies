<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:composition template="../modelo/template.xhtml">
    <ui:define name="conteudo">
      <div class="center_content">
		
			<h:form id="form">
		
				<p:messages id="messages" />
				
		
				<p:dataTable id="tabela" var="aquisicao" value="#{aquisicaoManagedBean.aquisicoesByUser}"
					paginator="true" rows="10" rowsPerPageTemplate="5,10,15" emptyMessage="Nenhuma aquisição encontrada" filteredValue="#{aquisicaoManagedBean.filteredAquisicoes}" >
					
					<f:facet name="header">
						Meus Downloads
					</f:facet>
					
					<p:column headerText="Filme"  sortBy="#{aquisicao.filme.titulo}" filterBy="#{aquisicao.filme.titulo}" style="widht:20px" >
						#{aquisicao.filme.titulo}
						
						<p:commandLink update=":form:filmeDetail"
							oncomplete="filmeDialog.show()" title="Visão Detalhada">
							<h:graphicImage value="../images/search.png" title="Detalhar"
								style="border: none" />
							<f:setPropertyActionListener value="#{aquisicao.filme}"
								target="#{filmeManagedBean.filme}" />
						</p:commandLink>
					</p:column>
					
					<p:column headerText="Data"  sortBy="#{aquisicao.data}" filterBy="#{aquisicao.data}" style="widht:15px" >
						
						<h:outputLabel value="#{aquisicao.data}">
                                                   <f:convertDateTime pattern="dd/MM/yyyy hh:mm:ss"></f:convertDateTime>
                        </h:outputLabel>
                        
					</p:column>
					
				</p:dataTable>	
				
				
				<p:dialog header="Filme detalhado" widgetVar="filmeDialog"
					modal="true">
					<p:outputPanel id="filmeDetail" style="text-align:center;" layout="block">

							<p:graphicImage
								value="../filmes/#{filmeManagedBean.filme.idFilme}.#{filmeManagedBean.filme.extensaoImg}"
								alt="#{filmeManagedBean.filme.titulo}" width="230" height="240" />

						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="id" value="Código: " />
							<h:outputText id="id" value="#{filmeManagedBean.filme.idFilme}" />

							<h:outputLabel for="titulo" value="Título: " />
							<h:outputText id="titulo"
								value="#{filmeManagedBean.filme.titulo}" />

							<h:outputLabel for="diretor" value="Diretor: " />
							<h:outputText id="diretor"
								value="#{filmeManagedBean.filme.diretor}" />

							<h:outputLabel for="categoria" value="Categoria: " />
							<h:outputText id="categoria"
								value="#{filmeManagedBean.filme.categoria.descricao}" />

							<h:outputLabel for="anoLancamento" value="Ano Lançamento: " />
							<h:outputText id="anoLancamento"
								value="#{filmeManagedBean.filme.anoLancamento}" />

							<h:outputLabel for="idioma" value="Idioma: " />
							<h:outputText id="idioma"
								value="#{filmeManagedBean.filme.descricaoIdioma}" />

							<h:outputLabel for="legenda" value="Legenda: " />
							<h:outputText id="legenda"
								value="#{filmeManagedBean.filme.descricaoLegenda}" />

							<h:outputLabel for="formato" value="Formato: " />
							<h:outputText id="formato"
								value="#{filmeManagedBean.filme.descricaoFormato}" />

							<h:outputLabel for="qualidade" value="Qualidade: " />
							<h:outputText id="qualidade"
								value="#{filmeManagedBean.filme.descricaoQualidade}" />

							<h:outputLabel for="tempoDuracao" value="Tempo Duração: " />
							<h:outputText id="tempoDuracao"
								value="#{filmeManagedBean.filme.tempoDuracao}" />

							<h:outputLabel for="descricao" value="Descricão: " />
							<h:outputText id="descricao"
								value="#{filmeManagedBean.filme.descricao}" />

						</h:panelGrid>
					</p:outputPanel>
				</p:dialog>	
						

			</h:form>

      
    </div><!-- end of center content -->
    </ui:define>
  	</ui:composition>

</html>